var temp,username,factTemp;function signIn(){var e={method:"signIn",username:document.getElementById("unInp").value,password:document.getElementById("psInp").value,id:document.getElementById("cont").getAttribute("data-id")};ws.send(JSON.stringify(e))}function goTo(e){let t=document.getElementsByClassName("page");for(let e of t)e.style.display="none";t[e].style.display="block";let n=document.getElementsByClassName("methodBtn");for(let e of n)e.style.textDecoration="none";n[e]&&(n[e].style.textDecoration="underline"),document.getElementById("errorMess").textContent=""}function showDesc(e){let t=document.getElementsByClassName("recoverCont");for(let e of t)e.style.display="none";t[e].style.display="block"}function activate(){var e={method:"activate",username:document.getElementById("actiName").value,code:document.getElementById("actiCode").value};ws.send(JSON.stringify(e))}function setPass(){var e=document.getElementById("setPass1").value,t=document.getElementById("setPass2").value;if(!(e.length<12||e!=t)){var n={method:"setPass",temp:temp,username:username,password:e,id:document.getElementById("cont").getAttribute("data-id")};ws.send(JSON.stringify(n))}}function check1(e){e.length<12?document.getElementById("problem1").textContent="Password must be at least 12 characters":(document.getElementById("problem1").textContent="",""!=document.getElementById("setPass2").value&&check2(document.getElementById("setPass2").value))}function check2(e){document.getElementById("setPass1").value!=e?document.getElementById("problem2").textContent="Passwords must match":document.getElementById("problem2").textContent=""}function checkFact(e){if(6==e.length){let t={method:"signIn2fa",code:e,temp:factTemp,username:document.getElementById("unInp").value};t.id=document.getElementById("cont").getAttribute("data-id"),ws.send(JSON.stringify(t))}}function forgotPass(){var e=document.getElementById("unInp").value,t=document.getElementById("recoUname").value;if(e.length>3){username=e;let t={method:"forgotPass",username:e};ws.send(JSON.stringify(t))}else if(t.length>3){username=t;let e={method:"forgotPass",username:t};ws.send(JSON.stringify(e))}else goTo(3)}function checkReco(e){if(6==e.length){let t={method:"checkRecoCode",username:username,code:e,temp:factTemp};ws.send(JSON.stringify(t))}}ws.onmessage=(e=>{const t=JSON.parse(e.data);if("activated"==t.method)temp=t.temp,username=t.username,goTo(2);else if("signedIn"==t.method)document.cookie=`token=${t.token}`,location.reload();else if("error"==t.method){if("505"==t.type)return location.reload(),!1;document.getElementById("errorMess").textContent=t.mess}else"promptCode"==t.method?(document.getElementById("promptCode").textContent=t.mess,goTo(4),factTemp=t.temp,0==t.able&&(document.getElementById("recoEnter").style.display="none")):"promptUname"==t.method?goTo(3):"promptFact"==t.method&&(goTo(5),factTemp=t.temp)});
