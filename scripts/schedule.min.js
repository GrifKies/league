var weekGames=[],teamGames={};function changeSortMethod(e){var a=e.parentElement;"none"==a.children[2].style.display?(a.children[1].style.display="none",a.children[1].selectedIndex=0,a.children[2].style.display="block"):(a.children[2].style.display="none",a.children[2].selectedIndex=0,a.children[1].style.display="block")}function requestGames(e,a){if(a){if(weekGames[Number(e.value)])return void renderGames(weekGames[Number(e.value)]);var o=Number(e.value),t="week"}else{if(teamGames[e.value])return void renderGames(teamGames[e.value]);o=e.value,t="team"}let s={method:"request",type:"games",qual:t,crit:o};ws.send(JSON.stringify(s))}function renderGames(e){document.getElementById("gamesCont").innerHTML="";for(let a of e)render(a)}function render(e){var a=buildElem("DIV","gameBox",void 0,document.getElementById("gamesCont")),o=new Date(e.schedule),t=`${numToDay(o.getDay())} ${o.getDate()} ${numToMon(o.getMonth())} ${e.time}`;"upcoming"==e.status.toLowerCase()?buildElem("DIV","gameTime",t,a):"ongoing"==e.status?buildElem("DIV","gameTime",`${t} - ${e.period}`,a):buildElem("DIV","gameTime",`${t} - ${e.status.toUpperCase()}`,a);var s=buildElem("DIV","gameTop",void 0,a),m=buildElem("DIV","gameTopHalf",void 0,s);if(m.classList.add(e.awayTeam.mascot.toLowerCase().replace(/\s/g,"")),buildElem("IMG","gameLogo",void 0,m).src=`logos/${e.awayTeam.mascot.toLowerCase().replace(/\s/g,"")}.png`,buildElem("DIV","gameName",e.awayTeam.mascot,m),buildElem("DIV","gameAbbr",e.awayTeam.abbr,m),"upcoming"==e.status)var l=buildElem("DIV","gameScore","-",m);else l=buildElem("DIV","gameScore",e.awayScore,m);var r=buildElem("DIV","gameTopHalf",void 0,s);if(r.classList.add(e.homeTeam.mascot.toLowerCase().replace(/\s/g,"")),"upcoming"==e.status)var i=buildElem("DIV","gameScore","-",r);else i=buildElem("DIV","gameScore",e.homeScore,r);if(buildElem("DIV","gameName",e.homeTeam.mascot,r),buildElem("DIV","gameAbbr",e.homeTeam.abbr,r),buildElem("IMG","gameLogo",void 0,r).src=`logos/${e.homeTeam.mascot.toLowerCase().replace(/\s/g,"")}.png`,-1!=e.status.toLowerCase().indexOf("final")||"ongoing"==e.status.toLowerCase()){e.awayScore<e.homeScore&&-1!=e.status.toLowerCase().indexOf("final")?i.style.fontWeight="bold":e.awayScore>e.homeScore&&-1!=e.status.toLowerCase().indexOf("final")&&(l.style.fontWeight="bold");var n=buildElem("DIV","gameBot",void 0,a),d=buildElem("TABLE","gameTable",void 0,n),u=d.insertRow(),c=["Team","1","2","3","4"];-1!=e.status.toLowerCase().indexOf("4ot")||"ongoing"==e.status&&"4OT"==e.period?c=c.concat(["OT","2OT","3OT","4OT","T"]):-1!=e.status.toLowerCase().indexOf("3ot")||"ongoing"==e.status&&"3OT"==e.period?c=c.concat(["OT","2OT","3OT","T"]):-1!=e.status.toLowerCase().indexOf("2ot")||"ongoing"==e.status&&"2OT"==e.period?c=c.concat(["OT","2OT","T"]):-1!=e.status.toLowerCase().indexOf("ot")||"ongoing"==e.status&&"OT"==e.period?c=c.concat(["OT","T"]):c.push("T");for(let e of c){u.insertCell().textContent=e}var g=[e.awayTeam.mascot];for(let a of JSON.parse(e.awaySbq))g.push(a);g.push(e.awayScore);var T=[e.homeTeam.mascot];for(let a of JSON.parse(e.homeSbq))T.push(a);T.push(e.homeScore);var b=[g,T];for(let e of b){let a=d.insertRow();for(let o of e){a.insertCell().textContent=o}}}}ws.onmessage=(e=>{const a=JSON.parse(e.data);console.log(a),"requested"==a.method&&(renderGames(a.data),"week"==a.qual?weekGames[a.crit]=a.data:teamGames[a.crit]=a.data)});