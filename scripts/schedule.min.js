var weekGames=[],teamGames={};function changeSortMethod(e){var a=e.parentElement;"none"==a.children[2].style.display?(a.children[1].style.display="none",a.children[1].selectedIndex=0,a.children[2].style.display="block"):(a.children[2].style.display="none",a.children[2].selectedIndex=0,a.children[1].style.display="block")}function requestGames(e,a){if(a){if(weekGames[Number(e.value)])return void renderGames(weekGames[Number(e.value)]);var o=Number(e.value),t="week"}else{if(teamGames[e.value])return void renderGames(teamGames[e.value]);o=e.value,t="team"}let s={method:"request",type:"games",qual:t,crit:o};ws.send(JSON.stringify(s))}function renderGames(e){document.getElementById("gamesCont").innerHTML="";for(let a of e)render(a)}function render(e){var a=buildElem("DIV","gameBox",void 0,document.getElementById("gamesCont")),o=new Date(e.schedule),t=o.getHours();if(t<12)var s="A";else s="P";t=t<12?t:t-12;var m=o.getMinutes();m=m<10?`0${m}`:m;var l=`${numToDay(o.getDay())} ${o.getDate()} ${numToMon(o.getMonth())} ${t}:${m}${s}`;"upcoming"==e.status.toLowerCase()?buildElem("DIV","gameTime",l,a):"ongoing"==e.status?buildElem("DIV","gameTime",`${l} - ${e.period}`,a):buildElem("DIV","gameTime",`${l} - ${e.status.toUpperCase()}`,a);var r=buildElem("DIV","gameTop",void 0,a),i=buildElem("DIV","gameTopHalf",void 0,r);if(i.classList.add(e.awayTeam.mascot.toLowerCase().replace(/\s/g,"")),buildElem("IMG","gameLogo",void 0,i).src=`logos/${e.awayTeam.mascot.toLowerCase().replace(/\s/g,"")}.png`,buildElem("DIV","gameName",e.awayTeam.mascot,i),buildElem("DIV","gameAbbr",e.awayTeam.abbr,i),"upcoming"==e.status)var n=buildElem("DIV","gameScore","-",i);else n=buildElem("DIV","gameScore",e.awayScore,i);var d=buildElem("DIV","gameTopHalf",void 0,r);if(d.classList.add(e.homeTeam.mascot.toLowerCase().replace(/\s/g,"")),"upcoming"==e.status)var u=buildElem("DIV","gameScore","-",d);else u=buildElem("DIV","gameScore",e.homeScore,d);if(buildElem("DIV","gameName",e.homeTeam.mascot,d),buildElem("DIV","gameAbbr",e.homeTeam.abbr,d),buildElem("IMG","gameLogo",void 0,d).src=`logos/${e.homeTeam.mascot.toLowerCase().replace(/\s/g,"")}.png`,-1!=e.status.toLowerCase().indexOf("final")||"ongoing"==e.status.toLowerCase()){e.awayScore<e.homeScore&&-1!=e.status.toLowerCase().indexOf("final")?u.style.fontWeight="bold":e.awayScore>e.homeScore&&-1!=e.status.toLowerCase().indexOf("final")&&(n.style.fontWeight="bold");var c=buildElem("DIV","gameBot",void 0,a),g=buildElem("TABLE","gameTable",void 0,c),T=g.insertRow(),f=["Team","1","2","3","4"];-1!=e.status.toLowerCase().indexOf("4ot")||"ongoing"==e.status&&"4OT"==e.period?f=f.concat(["OT","2OT","3OT","4OT","T"]):-1!=e.status.toLowerCase().indexOf("3ot")||"ongoing"==e.status&&"3OT"==e.period?f=f.concat(["OT","2OT","3OT","T"]):-1!=e.status.toLowerCase().indexOf("2ot")||"ongoing"==e.status&&"2OT"==e.period?f=f.concat(["OT","2OT","T"]):-1!=e.status.toLowerCase().indexOf("ot")||"ongoing"==e.status&&"OT"==e.period?f=f.concat(["OT","T"]):f.push("T");for(let e of f){T.insertCell().textContent=e}var b=[e.awayTeam.mascot];for(let a of JSON.parse(e.awaySbq))b.push(a);b.push(e.awayScore);var p=[e.homeTeam.mascot];for(let a of JSON.parse(e.homeSbq))p.push(a);p.push(e.homeScore);var w=[b,p];for(let e of w){let a=g.insertRow();for(let o of e){a.insertCell().textContent=o}}}}ws.onmessage=(e=>{const a=JSON.parse(e.data);console.log(a),"requested"==a.method&&(renderGames(a.data),"week"==a.qual?weekGames[a.crit]=a.data:teamGames[a.crit]=a.data)});
